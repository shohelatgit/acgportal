<!-- Global CTA Section with Contact Form -->
<section class="py-20 bg-brand-900 relative overflow-hidden">
    <div class="absolute inset-0">
        <div class="absolute top-0 left-0 w-full h-full bg-brand-800/50"></div>
    </div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <div>
                <h2 class="text-4xl font-bold text-white mb-6">Ready for a Beautiful Lawn?</h2>
                <p class="text-brand-100 text-lg mb-8 leading-relaxed">Join hundreds of satisfied homeowners who trust Turf Pro for their lawn care needs. Get your free quote today and take the first step to a greener, healthier lawn.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="tel:5085437648" class="inline-flex items-center justify-center px-8 py-4 bg-brand-700 text-white font-bold rounded-xl hover:bg-brand-600 transition-colors border border-brand-500">
                        <i data-lucide="phone" class="w-5 h-5 mr-2"></i> (508) 543-7648
                    </a>
                </div>
            </div>

            <div class="bg-white/10 backdrop-blur-md p-8 rounded-2xl border border-white/20">
                <h3 class="text-2xl font-bold text-white mb-6 text-center">Quick Contact</h3>
                <form id="cta-contact-form" class="space-y-4">
                    <div>
                        <input type="text" name="name" placeholder="Your Name" class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all">
                    </div>
                    <div>
                        <input type="email" name="email" placeholder="Your Email" required class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all">
                    </div>
                    <div>
                        <input type="tel" name="phone" placeholder="Your Phone" required class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all">
                    </div>
                    <div>
                        <textarea rows="3" name="message" placeholder="Message" class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/70 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all resize-none"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-white text-brand-900 font-bold py-4 rounded-lg hover:bg-brand-50 transition-colors shadow-lg">
                        Send Message
                    </button>
                    <div id="cta-form-status" class="hidden text-center text-sm py-2 rounded-lg"></div>
                </form>
            </div>
        </div>
    </div>
</section>

<script>
(function() {
    const ctaForm = document.getElementById('cta-contact-form');
    if (ctaForm) {
        ctaForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const statusEl = document.getElementById('cta-form-status');
            const submitBtn = ctaForm.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            statusEl.className = 'hidden';
            
            const formData = new FormData(ctaForm);
            const data = Object.fromEntries(formData.entries());
            
            try {
                const response = await fetch('/api/contact', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    statusEl.textContent = 'Message sent successfully! We\'ll be in touch soon.';
                    statusEl.className = 'text-center text-sm py-2 rounded-lg bg-green-500/20 text-green-200';
                    ctaForm.reset();
                } else {
                    throw new Error('Failed to send');
                }
            } catch (error) {
                statusEl.textContent = 'Failed to send message. Please call us instead.';
                statusEl.className = 'text-center text-sm py-2 rounded-lg bg-red-500/20 text-red-200';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            }
        });
    }
})();
</script>
